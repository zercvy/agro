FROM node:20

WORKDIR /app

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º ts-node-dev –≥–ª–æ–±–∞–ª—å–Ω–æ ‚Äî –Ω–∞–¥–µ–∂–Ω–æ –¥–ª—è –≤—Å–µ—Ö
RUN npm install -g ts-node-dev

COPY package*.json ./
RUN npm install

COPY . .

CMD ["ts-node-dev", "--respawn", "--transpile-only", "src/index.ts"]


# FROM node:20

# RUN apt update && apt install -y \
#   build-essential cmake git curl unzip libopenblas-dev && \
#   rm -rf /var/lib/apt/lists/*

# WORKDIR /app

# RUN npm install -g ts-node-dev

# COPY package*.json ./
# RUN npm install

# # üëá —Å–Ω–∞—á–∞–ª–∞ –∫–æ–ø–∏—Ä—É–µ–º –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ (–Ω–µ llama.cpp!)
# COPY . .

# # üëá –ø–æ—Ç–æ–º –∫–ª–æ–Ω–∏—Ä—É–µ–º llama.cpp (–Ω–µ –∑–∞—Ç–∏—Ä–∞–µ—Ç—Å—è!)
# RUN git clone --depth=1 https://github.com/ggerganov/llama.cpp.git /app/llama.cpp && \
#     mkdir -p /app/llama.cpp/build && \
#     cd /app/llama.cpp/build && \
#     cmake .. && make -j && \
#     ls -lh /app/llama.cpp/build/bin

# # CMD
# CMD ["ts-node-dev", "--respawn", "--transpile-only", "src/index.ts"]
